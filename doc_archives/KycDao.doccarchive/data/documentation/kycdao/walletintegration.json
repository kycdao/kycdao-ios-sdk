{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This article provides a guide for integrating the SDK into a wallet app."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Three main topics will be discussed here:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Handle wallet related tasks"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Checking the verification status of an address"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Initializing a verification flow"}]}]}]},{"anchor":"Handle-wallet-related-tasks","level":2,"type":"heading","text":"Handle wallet related tasks"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The SDK requires that it has access to wallet related data and functions. "},{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol"},{"type":"text","text":" describes a communication session with your wallet, where these function and data requirements are defined. You have to create a conforming class to this protocol and provide an implementation of the signing and minting functions."}]},{"anchor":"Conforming-to-WalletSessionProtocol","level":3,"type":"heading","text":"Conforming to WalletSessionProtocol"},{"type":"table","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Properties"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Implementation"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol\/id"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"A unique identifier for your session, assigning "},{"type":"codeVoice","code":"UUID().uuidString"},{"type":"text","text":" to this property at the initialization of your implementation should be enough."}]}]],[[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol\/chainId"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"The ID of the chain used specified in "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/ChainAgnostic\/CAIPs\/blob\/master\/CAIPs\/caip-2.md"},{"type":"text","text":". For example "},{"type":"codeVoice","code":"eip155:1"},{"type":"text","text":" is the "},{"type":"codeVoice","code":"chainId"},{"type":"text","text":" of Ethereum Mainnet."}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"WalletSessionProtocol\/rpcURL"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"A custom RPC URL you whish to use during on-chain calls. Make sure your custom RPC uses the same chain you provided the "},{"type":"codeVoice","code":"chainId"},{"type":"text","text":" for. By returning "},{"type":"codeVoice","code":"nil"},{"type":"text","text":" for "},{"type":"codeVoice","code":"rpcURL"},{"type":"text","text":", the SDK will default to using its own RPC for the given chain."}]}]]],"header":"row"},{"anchor":"Functions","level":4,"type":"heading","text":"Functions"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol\/personalSign(walletAddress:message:)"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the implementation of this function your wallet is expected to sign a message (for EVM chains use the personal_sign call), with the given wallet address. The return value of this function should be the signed message."}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol\/sendMintingTransaction(walletAddress:mintingProperties:)"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the implementation of this function your wallet is expected to send a transaction (for EVM chains use eth_sendTransaction call), with the given wallet address using the minting properties."}]},{"anchor":"Checking-the-verification-status-of-an-address","level":2,"type":"heading","text":"Checking the verification status of an address"},{"anchor":"Using-your-WalletSessionProtocol-implementation","level":3,"type":"heading","text":"Using your WalletSessionProtocol implementation"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You have to pass your "},{"type":"codeVoice","code":"WalletSession"},{"type":"text","text":" object to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/VerificationManager\/hasValidToken(verificationType:walletAddress:walletSession:)"},{"type":"text","text":" along with a wallet address and verification type."}]},{"type":"codeListing","syntax":"swift","code":["let hasValidToken = try await VerificationManager.shared.hasValidToken(verificationType: .kyc,","                                                                       walletAddress: selectedAddress,","                                                                       walletSession: walletSession)"]},{"anchor":"Using-existing-wallet-information","level":3,"type":"heading","text":"Using existing wallet information"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A "},{"type":"codeVoice","code":"NetworkOptions"},{"type":"text","text":" object have to be constructed specifying the chain in CAIP-2 format and an RPC URL can be optionally provided, read more about it in "},{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/BringYourOwnNode"},{"type":"text","text":"."}]},{"type":"codeListing","syntax":"swift","code":["let networkOptions = NetworkOptions(chainId: \"eip155:80001\")","let hasValidToken = try await VerificationManager.shared.hasValidToken(verificationType: .kyc,","                                                                       walletAddress: walletAddress,","                                                                       networkOptions: networkOptions)"]},{"anchor":"Initializing-a-verification-flow","level":2,"type":"heading","text":"Initializing a verification flow"},{"type":"paragraph","inlineContent":[{"type":"text","text":"First you need to have an instance of an object you created at the "},{"type":"emphasis","inlineContent":[{"type":"text","text":"‘Conforming to WalletSessionProtocol’"}]},{"type":"text","text":" section. Once you obtained your wallet session instance, pass it along with a wallet address to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/VerificationManager\/createSession(walletAddress:walletSession:)"}]},{"type":"codeListing","syntax":"swift","code":["let walletSession: WalletSessionProtocol = ...","let verificationSession = try await VerificationManager.shared.createSession(walletAddress: selectedAccount,","                                                                             walletSession: walletSession)"]},{"anchor":"Implementing-the-verification-flow","level":2,"type":"heading","text":"Implementing the verification flow"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The verification flow is the same for DApps and Wallets. It is covered in a common article:"}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/Onboarding"}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/kycdao\/walletintegration"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/KycDao\/documentation\/KycDao\/WalletIntegration","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Wallet integration guide"}],"kind":"article","metadata":{"roleHeading":"Article","title":"Wallet Integration","role":"article","modules":[{"name":"KycDao"}]},"hierarchy":{"paths":[["doc:\/\/KycDao\/documentation\/KycDao"]]},"seeAlsoSections":[{"title":"Articles","identifiers":["doc:\/\/KycDao\/documentation\/KycDao\/Installation","doc:\/\/KycDao\/documentation\/KycDao\/DAppIntegration","doc:\/\/KycDao\/documentation\/KycDao\/Onboarding","doc:\/\/KycDao\/documentation\/KycDao\/BringYourOwnNode"],"generated":true}],"references":{"doc://KycDao/documentation/KycDao/DAppIntegration":{"role":"article","title":"DApp and Web2 Integration","abstract":[{"type":"text","text":"DApp and Web2 integration guide"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/DAppIntegration","kind":"article","type":"topic","url":"\/documentation\/kycdao\/dappintegration"},"doc://KycDao/documentation/KycDao/WalletSessionProtocol/sendMintingTransaction(walletAddress:mintingProperties:)":{"role":"symbol","title":"sendMintingTransaction(walletAddress:mintingProperties:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"sendMintingTransaction"},{"kind":"text","text":"("},{"kind":"externalParam","text":"walletAddress"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"mintingProperties"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"MintingProperties","preciseIdentifier":"s:6KycDao17MintingPropertiesV"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"abstract":[{"type":"text","text":"A function used for sending a minting transaction with the wallet app"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol\/sendMintingTransaction(walletAddress:mintingProperties:)","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/kycdao\/walletsessionprotocol\/sendmintingtransaction(walletaddress:mintingproperties:)"},"doc://KycDao/documentation/KycDao":{"role":"collection","title":"KycDao","abstract":[{"type":"text","text":"On-chain KYC - Bridge IRL to web3"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao","kind":"symbol","type":"topic","url":"\/documentation\/kycdao"},"doc://KycDao/documentation/KycDao/WalletSessionProtocol":{"role":"symbol","title":"WalletSessionProtocol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"WalletSessionProtocol"}],"abstract":[{"type":"text","text":"The protocol describes a communication session with a wallet that can be used during the verification process."}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"WalletSessionProtocol"}],"url":"\/documentation\/kycdao\/walletsessionprotocol"},"doc://KycDao/documentation/KycDao/VerificationManager/createSession(walletAddress:walletSession:)":{"role":"symbol","title":"createSession(walletAddress:walletSession:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"createSession"},{"kind":"text","text":"("},{"kind":"externalParam","text":"walletAddress"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"walletSession"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"WalletSessionProtocol","preciseIdentifier":"s:6KycDao21WalletSessionProtocolP"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"VerificationSession","preciseIdentifier":"s:6KycDao19VerificationSessionC"}],"abstract":[{"type":"text","text":"Creates a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/VerificationSession"},{"type":"text","text":" which is used for implementing the verification flow"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/VerificationManager\/createSession(walletAddress:walletSession:)","kind":"symbol","type":"topic","url":"\/documentation\/kycdao\/verificationmanager\/createsession(walletaddress:walletsession:)"},"doc://KycDao/documentation/KycDao/VerificationManager/hasValidToken(verificationType:walletAddress:walletSession:)":{"role":"symbol","title":"hasValidToken(verificationType:walletAddress:walletSession:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"hasValidToken"},{"kind":"text","text":"("},{"kind":"externalParam","text":"verificationType"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"VerificationType","preciseIdentifier":"s:6KycDao16VerificationTypeO"},{"kind":"text","text":", "},{"kind":"externalParam","text":"walletAddress"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"walletSession"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"WalletSessionProtocol","preciseIdentifier":"s:6KycDao21WalletSessionProtocolP"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Checks on-chain whether the wallet has a valid token for the verification type"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/VerificationManager\/hasValidToken(verificationType:walletAddress:walletSession:)","kind":"symbol","type":"topic","url":"\/documentation\/kycdao\/verificationmanager\/hasvalidtoken(verificationtype:walletaddress:walletsession:)"},"doc://KycDao/documentation/KycDao/WalletSessionProtocol/personalSign(walletAddress:message:)":{"role":"symbol","title":"personalSign(walletAddress:message:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"personalSign"},{"kind":"text","text":"("},{"kind":"externalParam","text":"walletAddress"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"message"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"abstract":[{"type":"text","text":"A function used for signing a message with the wallet app"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol\/personalSign(walletAddress:message:)","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/kycdao\/walletsessionprotocol\/personalsign(walletaddress:message:)"},"doc://KycDao/documentation/KycDao/WalletSessionProtocol/id":{"role":"symbol","title":"id","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"id"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"abstract":[{"type":"text","text":"A unique identifier of the session"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol\/id","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/kycdao\/walletsessionprotocol\/id"},"doc://KycDao/documentation/KycDao/Installation":{"role":"article","title":"Installation","abstract":[{"type":"text","text":"Adding kycDAO SDK to your project"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/Installation","kind":"article","type":"topic","url":"\/documentation\/kycdao\/installation"},"doc://KycDao/documentation/KycDao/Onboarding":{"role":"article","title":"Onboarding","abstract":[{"type":"text","text":"A guide for the verification process and NFT minting"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/Onboarding","kind":"article","type":"topic","url":"\/documentation\/kycdao\/onboarding"},"doc://KycDao/documentation/KycDao/WalletSessionProtocol/chainId":{"role":"symbol","title":"chainId","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"chainId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"abstract":[{"type":"text","text":"The ID of the chain used specified in "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/ChainAgnostic\/CAIPs\/blob\/master\/CAIPs\/caip-2.md"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/WalletSessionProtocol\/chainId","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/kycdao\/walletsessionprotocol\/chainid"},"doc://KycDao/documentation/KycDao/BringYourOwnNode":{"role":"article","title":"Bring Your Own Node","abstract":[{"type":"text","text":"Use your own RPC URLs to handle network calls"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/BringYourOwnNode","kind":"article","type":"topic","url":"\/documentation\/kycdao\/bringyourownnode"},"doc://KycDao/documentation/KycDao/VerificationSession":{"role":"symbol","title":"VerificationSession","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"VerificationSession"}],"abstract":[{"type":"text","text":"A verification session object which contains session related data and session related operations"}],"identifier":"doc:\/\/KycDao\/documentation\/KycDao\/VerificationSession","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"VerificationSession"}],"url":"\/documentation\/kycdao\/verificationsession"},"https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md":{"title":"CAIP-2 format","titleInlineContent":[{"type":"text","text":"CAIP-2 format"}],"type":"link","identifier":"https:\/\/github.com\/ChainAgnostic\/CAIPs\/blob\/master\/CAIPs\/caip-2.md","url":"https:\/\/github.com\/ChainAgnostic\/CAIPs\/blob\/master\/CAIPs\/caip-2.md"}}}